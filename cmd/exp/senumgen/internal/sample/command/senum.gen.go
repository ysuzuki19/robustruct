// Code generated by senum; DO NOT EDIT.
package command

import (
	"github.com/ysuzuki19/robustruct/cmd/exp/senumgen/command/sub"
	"github.com/ysuzuki19/robustruct/cmd/exp/senumgen/types"
)

type tag int

const (
	tagHelp  tag = iota
	tagRun   tag = iota
	tagSub   tag = iota
	tagLocal tag = iota
)

type commandEnum struct {
	command
	tag tag
}

func NewHelp(v types.NonVar) commandEnum {
	return commandEnum{
		command: command{
			help: v,
		},
		tag: tagHelp,
	}
}
func NewRun(v *string) commandEnum {
	return commandEnum{
		command: command{
			run: v,
		},
		tag: tagRun,
	}
}
func NewSub(v *sub.SubCommand) commandEnum {
	return commandEnum{
		command: command{
			sub: v,
		},
		tag: tagSub,
	}
}
func NewLocal(v *Local) commandEnum {
	return commandEnum{
		command: command{
			local: v,
		},
		tag: tagLocal,
	}
}
func (e *commandEnum) IsHelp() bool {
	return e.tag == tagHelp
}
func (e *commandEnum) AsHelp() (types.NonVar, bool) {
	if e.IsHelp() {
		return e.command.help, true
	}
	return nil, false
}
func (e *commandEnum) IsRun() bool {
	return e.tag == tagRun
}
func (e *commandEnum) AsRun() (*string, bool) {
	if e.IsRun() {
		return e.command.run, true
	}
	return nil, false
}
func (e *commandEnum) IsSub() bool {
	return e.tag == tagSub
}
func (e *commandEnum) AsSub() (*sub.SubCommand, bool) {
	if e.IsSub() {
		return e.command.sub, true
	}
	return nil, false
}
func (e *commandEnum) IsLocal() bool {
	return e.tag == tagLocal
}
func (e *commandEnum) AsLocal() (*Local, bool) {
	if e.IsLocal() {
		return e.command.local, true
	}
	return nil, false
}

type Switcher struct {
	Help  func(v types.NonVar)
	Run   func(v *string)
	Sub   func(v *sub.SubCommand)
	Local func(v *Local)
}

func (e *commandEnum) Switch(s Switcher) {
	switch e.tag {
	case tagHelp:
		s.Help(e.command.help)
	case tagRun:
		s.Run(e.command.run)
	case tagSub:
		s.Sub(e.command.sub)
	case tagLocal:
		s.Local(e.command.local)
	}
}

type Matcher[MatchResult any] struct {
	Help  func(v types.NonVar) MatchResult
	Run   func(v *string) MatchResult
	Sub   func(v *sub.SubCommand) MatchResult
	Local func(v *Local) MatchResult
}

func Match[MatchResult any](e *commandEnum, m Matcher[MatchResult]) MatchResult {
	switch e.tag {
	case tagHelp:
		return m.Help(e.command.help)
	case tagRun:
		return m.Run(e.command.run)
	case tagSub:
		return m.Sub(e.command.sub)
	case tagLocal:
		return m.Local(e.command.local)
	}
	panic("unreachable: invalid tag")
}
